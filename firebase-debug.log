[debug] [2025-12-12T03:55:34.463Z] ----------------------------------------------------------------------
[debug] [2025-12-12T03:55:34.466Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\jerry\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2025-12-12T03:55:34.467Z] CLI Version:   15.0.0
[debug] [2025-12-12T03:55:34.467Z] Platform:      win32
[debug] [2025-12-12T03:55:34.467Z] Node Version:  v24.11.1
[debug] [2025-12-12T03:55:34.467Z] Time:          Thu Dec 11 2025 19:55:34 GMT-0800 (太平洋標準時間)
[debug] [2025-12-12T03:55:34.467Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-12-12T03:55:36.700Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-12-12T03:55:36.700Z] > authorizing via signed-in user (nookohub@gmail.com)
[debug] [2025-12-12T03:55:36.700Z] [iam] checking project nooko-hub for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-12-12T03:55:36.701Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:36.701Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:36.702Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/nooko-hub:testIamPermissions [none]
[debug] [2025-12-12T03:55:36.702Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/nooko-hub:testIamPermissions x-goog-quota-user=projects/nooko-hub
[debug] [2025-12-12T03:55:36.703Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/nooko-hub:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-12-12T03:55:36.848Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/nooko-hub:testIamPermissions 200
[debug] [2025-12-12T03:55:36.849Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/nooko-hub:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-12-12T03:55:36.849Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:36.849Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:36.849Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/nooko-hub/serviceAccounts/nooko-hub@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-12-12T03:55:36.849Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/nooko-hub/serviceAccounts/nooko-hub@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-12-12T03:55:37.000Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/nooko-hub/serviceAccounts/nooko-hub@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-12-12T03:55:37.000Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/nooko-hub/serviceAccounts/nooko-hub@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'nooko-hub'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] +  functions: Finished running predeploy script. 
[debug] [2025-12-12T03:55:37.473Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:37.473Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:37.473Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/nooko-hub [none]
[debug] [2025-12-12T03:55:37.565Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/nooko-hub 200
[debug] [2025-12-12T03:55:37.565Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/nooko-hub {"projectNumber":"46349385457","projectId":"nooko-hub","lifecycleState":"ACTIVE","name":"Nooko Hub","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-07-30T18:05:15.266819Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-12-12T03:55:37.568Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:37.568Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:37.568Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/nooko-hub/adminSdkConfig [none]
[debug] [2025-12-12T03:55:38.026Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/nooko-hub/adminSdkConfig 200
[debug] [2025-12-12T03:55:38.026Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/nooko-hub/adminSdkConfig {"projectId":"nooko-hub","databaseURL":"https://nooko-hub-default-rtdb.firebaseio.com","storageBucket":"nooko-hub.firebasestorage.app"}
[debug] [2025-12-12T03:55:38.028Z] Validating nodejs source
[debug] [2025-12-12T03:55:38.995Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "echo \"Skipping lint for Cloud Functions\"",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^13.6.0",
    "firebase-functions": "^7.0.0",
    "nodemailer": "^7.0.11"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.4.1"
  },
  "private": true
}
[debug] [2025-12-12T03:55:38.995Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-12-12T03:55:38.996Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-12-12T03:55:39.010Z] Found firebase-functions binary at 'C:\Users\jerry\JYC\jingyecheng-landing-web\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8039

[debug] [2025-12-12T03:55:39.992Z] Got response from /__/functions.yaml {"endpoints":{"notifyNewChatMessage":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/nooko-hub/databases/(default)/documents/jyc_chat_messages/{docId}"},"retry":false},"labels":{},"entryPoint":"notifyNewChatMessage"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-12-12T03:55:44.032Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:44.032Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:44.032Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/nooko-hub/services/firebaseextensions.googleapis.com [none]
[debug] [2025-12-12T03:55:44.032Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/nooko-hub/services/firebaseextensions.googleapis.com x-goog-quota-user=projects/nooko-hub
[debug] [2025-12-12T03:55:44.518Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/nooko-hub/services/firebaseextensions.googleapis.com 200
[debug] [2025-12-12T03:55:44.518Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/nooko-hub/services/firebaseextensions.googleapis.com [omitted]
[info] +  extensions: required API firebaseextensions.googleapis.com is enabled 
[debug] [2025-12-12T03:55:44.523Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-12-12T03:55:44.523Z] > authorizing via signed-in user (nookohub@gmail.com)
[debug] [2025-12-12T03:55:44.524Z] [iam] checking project nooko-hub for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-12-12T03:55:44.524Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:44.524Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:44.524Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/nooko-hub:testIamPermissions [none]
[debug] [2025-12-12T03:55:44.524Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/nooko-hub:testIamPermissions x-goog-quota-user=projects/nooko-hub
[debug] [2025-12-12T03:55:44.524Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/nooko-hub:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-12-12T03:55:44.629Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/nooko-hub:testIamPermissions 200
[debug] [2025-12-12T03:55:44.629Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/nooko-hub:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-12-12T03:55:44.629Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:44.629Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:44.629Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/nooko-hub/instances pageSize=100&pageToken=
[debug] [2025-12-12T03:55:44.972Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/nooko-hub/instances 200
[debug] [2025-12-12T03:55:44.972Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/nooko-hub/instances {}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged C:\Users\jerry\JYC\jingyecheng-landing-web\functions (78.62 KB) for uploading 
[debug] [2025-12-12T03:55:45.006Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:45.006Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:45.006Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/nooko-hub/locations/-/functions [none]
[debug] [2025-12-12T03:55:45.652Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/nooko-hub/locations/-/functions 200
[debug] [2025-12-12T03:55:45.652Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/nooko-hub/locations/-/functions {}
[debug] [2025-12-12T03:55:45.652Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:45.652Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:45.653Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-12-12T03:55:46.074Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/-/functions 200
[debug] [2025-12-12T03:55:46.074Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/-/functions {"functions":[{"name":"projects/nooko-hub/locations/us-central1/functions/sendMessage","buildConfig":{"build":"projects/46349385457/locations/us-central1/builds/ea47eee3-89e9-48dc-8511-ebaa42ceb0e7","runtime":"nodejs20","entryPoint":"sendMessage","source":{"storageSource":{"bucket":"gcf-v2-sources-46349385457-us-central1","object":"sendMessage/function-source.zip","generation":"1754940295460666"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/nooko-hub/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-46349385457-us-central1","object":"sendMessage/function-source.zip","generation":"1754940295460666"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/nooko-hub/serviceAccounts/46349385457-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/nooko-hub/locations/us-central1/services/sendmessage","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"nooko-hub\",\"databaseURL\":\"https://nooko-hub-default-rtdb.firebaseio.com\",\"storageBucket\":\"nooko-hub.firebasestorage.app\"}","GCLOUD_PROJECT":"nooko-hub","EVENTARC_CLOUD_EVENT_SOURCE":"projects/nooko-hub/locations/us-central1/services/sendMessage","FUNCTION_TARGET":"sendMessage","LOG_EXECUTION_ID":"true"},"maxInstanceCount":20,"ingressSettings":"ALLOW_ALL","uri":"https://sendmessage-texcbzsmha-uc.a.run.app","serviceAccountEmail":"46349385457-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sendmessage-00001-rib","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","updateTime":"2025-08-11T19:26:02.413793248Z","labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"49f719100cdaca59d4bb392fc1a8d7c42310780f"},"environment":"GEN_2","url":"https://us-central1-nooko-hub.cloudfunctions.net/sendMessage","createTime":"2025-08-11T19:12:30.915024918Z","satisfiesPzi":true},{"name":"projects/nooko-hub/locations/us-central1/functions/startConversation","buildConfig":{"build":"projects/46349385457/locations/us-central1/builds/ea47eee3-89e9-48dc-8511-ebaa42ceb0e7","runtime":"nodejs20","entryPoint":"startConversation","source":{"storageSource":{"bucket":"gcf-v2-sources-46349385457-us-central1","object":"startConversation/function-source.zip","generation":"1754940354993870"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/nooko-hub/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-46349385457-us-central1","object":"startConversation/function-source.zip","generation":"1754940354993870"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/nooko-hub/serviceAccounts/46349385457-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/nooko-hub/locations/us-central1/services/startconversation","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"nooko-hub\",\"databaseURL\":\"https://nooko-hub-default-rtdb.firebaseio.com\",\"storageBucket\":\"nooko-hub.firebasestorage.app\"}","GCLOUD_PROJECT":"nooko-hub","EVENTARC_CLOUD_EVENT_SOURCE":"projects/nooko-hub/locations/us-central1/services/startConversation","FUNCTION_TARGET":"startConversation","LOG_EXECUTION_ID":"true","FUNCTION_SIGNATURE_TYPE":"http"},"maxInstanceCount":20,"ingressSettings":"ALLOW_ALL","uri":"https://startconversation-texcbzsmha-uc.a.run.app","serviceAccountEmail":"46349385457-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"startconversation-00001-xuz","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","updateTime":"2025-08-11T19:26:02.876875417Z","labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"49f719100cdaca59d4bb392fc1a8d7c42310780f"},"environment":"GEN_2","url":"https://us-central1-nooko-hub.cloudfunctions.net/startConversation","createTime":"2025-08-11T19:13:20.007787578Z","satisfiesPzi":true}]}
[debug] [2025-12-12T03:55:46.078Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:46.078Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:46.079Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/nooko-hub [none]
[debug] [2025-12-12T03:55:46.180Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/nooko-hub 200
[debug] [2025-12-12T03:55:46.181Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/nooko-hub {"projectNumber":"46349385457","projectId":"nooko-hub","lifecycleState":"ACTIVE","name":"Nooko Hub","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-07-30T18:05:15.266819Z"}
[debug] [2025-12-12T03:55:46.181Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:46.181Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:46.182Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/nooko-hub/billingInfo [none]
[debug] [2025-12-12T03:55:46.433Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/nooko-hub/billingInfo 200
[debug] [2025-12-12T03:55:46.433Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/nooko-hub/billingInfo {"name":"projects/nooko-hub/billingInfo","projectId":"nooko-hub","billingAccountName":"billingAccounts/0176B0-261B6C-A16880","billingEnabled":true}
[debug] [2025-12-12T03:55:46.434Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:46.434Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:55:46.435Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/nooko-hub/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-12-12T03:55:46.435Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/nooko-hub/locations/us-central1/functions:generateUploadUrl {}
[debug] [2025-12-12T03:55:56.861Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/nooko-hub/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-12-12T03:55:56.861Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/nooko-hub/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-300177851644.us-central1.cloudfunctions.appspot.com/282ff3e5-b88a-467c-af5d-026e258743ff.zip?GoogleAccessId=service-46349385457@gcf-admin-robot.iam.gserviceaccount.com&Expires=1765513557&Signature=S29ZFxbDVU9eEk2PqbLFutWRme9oviZTfvqGTErqe4DqEKO0XvwRnjzGuFz9Zn%2FKEf7JgL3r6Wj3jGdrXKa15doBzgVxtdq6qNZm0iPHmBpgHyuQSXGAVBWiQVKzASVTesy1jIB39Fc8KroGoQ7YJWTF%2FyDpKkhJx4Js%2BWOxpXMVLBM04kfZWuxh448ZQpNbEWp%2B9C0pul5WIi0FSk8GLR3GLBIAVKSHD27A7YkOJer5tLRBKJiGB0Nfg9aVGcg49TyWU%2FbjgI%2FOMJ6vPjefoDvso0ioz8%2B%2FO%2FEeRiLizKNCFyG0AlKC4B9Owj7VAeCsDBA9uECe3JS39Hu1kyg19w%3D%3D"}
[debug] [2025-12-12T03:55:56.861Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-300177851644.us-central1.cloudfunctions.appspot.com/282ff3e5-b88a-467c-af5d-026e258743ff.zip GoogleAccessId=service-46349385457%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1765513557&Signature=S29ZFxbDVU9eEk2PqbLFutWRme9oviZTfvqGTErqe4DqEKO0XvwRnjzGuFz9Zn%2FKEf7JgL3r6Wj3jGdrXKa15doBzgVxtdq6qNZm0iPHmBpgHyuQSXGAVBWiQVKzASVTesy1jIB39Fc8KroGoQ7YJWTF%2FyDpKkhJx4Js%2BWOxpXMVLBM04kfZWuxh448ZQpNbEWp%2B9C0pul5WIi0FSk8GLR3GLBIAVKSHD27A7YkOJer5tLRBKJiGB0Nfg9aVGcg49TyWU%2FbjgI%2FOMJ6vPjefoDvso0ioz8%2B%2FO%2FEeRiLizKNCFyG0AlKC4B9Owj7VAeCsDBA9uECe3JS39Hu1kyg19w%3D%3D
[debug] [2025-12-12T03:55:56.861Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-300177851644.us-central1.cloudfunctions.appspot.com/282ff3e5-b88a-467c-af5d-026e258743ff.zip [stream]
[debug] [2025-12-12T03:55:57.272Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-300177851644.us-central1.cloudfunctions.appspot.com/282ff3e5-b88a-467c-af5d-026e258743ff.zip 200
[debug] [2025-12-12T03:55:57.272Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-300177851644.us-central1.cloudfunctions.appspot.com/282ff3e5-b88a-467c-af5d-026e258743ff.zip [omitted]
[info] +  functions: functions source uploaded successfully 
[info] 
The following functions are found in your project but do not exist in your local source code:
	sendMessage(us-central1)
	startConversation(us-central1)

If you are renaming a function or changing its region, it is recommended that you create the new function first before deleting the old one to prevent event loss. For more info, visit https://firebase.google.com/docs/functions/manage-functions#modify

[info] i  functions: creating Node.js 20 (1st Gen) function notifyNewChatMessage(us-central1)... 
[debug] [2025-12-12T03:57:57.958Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:57:57.958Z] Checked if tokens are valid: true, expires at: 1765515203286
[info] i  functions: deleting Node.js 20 (2nd Gen) function sendMessage(us-central1)... 
[info] i  functions: deleting Node.js 20 (2nd Gen) function startConversation(us-central1)... 
[debug] [2025-12-12T03:57:57.959Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:57:57.959Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:57:57.959Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:57:57.959Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:57:57.959Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/nooko-hub/locations/us-central1/functions [none]
[debug] [2025-12-12T03:57:57.959Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/nooko-hub/locations/us-central1/functions {"name":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage","sourceUploadUrl":"https://storage.googleapis.com/uploads-300177851644.us-central1.cloudfunctions.appspot.com/282ff3e5-b88a-467c-af5d-026e258743ff.zip?GoogleAccessId=service-46349385457@gcf-admin-robot.iam.gserviceaccount.com&Expires=1765513557&Signature=S29ZFxbDVU9eEk2PqbLFutWRme9oviZTfvqGTErqe4DqEKO0XvwRnjzGuFz9Zn%2FKEf7JgL3r6Wj3jGdrXKa15doBzgVxtdq6qNZm0iPHmBpgHyuQSXGAVBWiQVKzASVTesy1jIB39Fc8KroGoQ7YJWTF%2FyDpKkhJx4Js%2BWOxpXMVLBM04kfZWuxh448ZQpNbEWp%2B9C0pul5WIi0FSk8GLR3GLBIAVKSHD27A7YkOJer5tLRBKJiGB0Nfg9aVGcg49TyWU%2FbjgI%2FOMJ6vPjefoDvso0ioz8%2B%2FO%2FEeRiLizKNCFyG0AlKC4B9Owj7VAeCsDBA9uECe3JS39Hu1kyg19w%3D%3D","entryPoint":"notifyNewChatMessage","runtime":"nodejs20","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"a6b53db0f32384aa7772a58b5639488634932525"},"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/nooko-hub/databases/(default)/documents/jyc_chat_messages/{docId}"},"minInstances":null,"maxInstances":null,"ingressSettings":null,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"nooko-hub\",\"databaseURL\":\"https://nooko-hub-default-rtdb.firebaseio.com\",\"storageBucket\":\"nooko-hub.firebasestorage.app\"}","GCLOUD_PROJECT":"nooko-hub","EVENTARC_CLOUD_EVENT_SOURCE":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage"},"serviceAccountEmail":null,"availableMemoryMb":null,"timeout":null,"vpcConnector":null,"vpcConnectorEgressSettings":null,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2025-12-12T03:57:57.961Z] >>> [apiv2][query] DELETE https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/functions/sendMessage [none]
[debug] [2025-12-12T03:57:57.963Z] >>> [apiv2][query] DELETE https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/functions/startConversation [none]
[debug] [2025-12-12T03:57:58.317Z] <<< [apiv2][status] DELETE https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/functions/startConversation 200
[debug] [2025-12-12T03:57:58.318Z] <<< [apiv2][body] DELETE https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/functions/startConversation {"name":"projects/nooko-hub/locations/us-central1/operations/operation-1765511879026-645b9446568f6-9b161675-b7134345","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-12-12T03:57:59.045855786Z","target":"projects/nooko-hub/locations/us-central1/functions/startConversation","verb":"delete","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2025-12-12T03:57:58.318Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:57:58.318Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:57:58.318Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879026-645b9446568f6-9b161675-b7134345 [none]
[debug] [2025-12-12T03:57:58.350Z] <<< [apiv2][status] DELETE https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/functions/sendMessage 200
[debug] [2025-12-12T03:57:58.350Z] <<< [apiv2][body] DELETE https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/functions/sendMessage {"name":"projects/nooko-hub/locations/us-central1/operations/operation-1765511879056-645b94465de00-6be2b16c-40691da5","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-12-12T03:57:59.074257930Z","target":"projects/nooko-hub/locations/us-central1/functions/sendMessage","verb":"delete","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2025-12-12T03:57:58.350Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:57:58.350Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:57:58.350Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879056-645b94465de00-6be2b16c-40691da5 [none]
[debug] [2025-12-12T03:57:58.472Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879056-645b94465de00-6be2b16c-40691da5 200
[debug] [2025-12-12T03:57:58.472Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879056-645b94465de00-6be2b16c-40691da5 {"name":"projects/nooko-hub/locations/us-central1/operations/operation-1765511879056-645b94465de00-6be2b16c-40691da5","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-12-12T03:57:59.074257930Z","target":"projects/nooko-hub/locations/us-central1/functions/sendMessage","verb":"delete","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2025-12-12T03:57:58.624Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879026-645b9446568f6-9b161675-b7134345 200
[debug] [2025-12-12T03:57:58.624Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879026-645b9446568f6-9b161675-b7134345 {"name":"projects/nooko-hub/locations/us-central1/operations/operation-1765511879026-645b9446568f6-9b161675-b7134345","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-12-12T03:57:59.045855786Z","target":"projects/nooko-hub/locations/us-central1/functions/startConversation","verb":"delete","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/nooko-hub/locations/us-central1/functions/startConversation","environment":"GEN_2"},"stages":[{"name":"ARTIFACT_REGISTRY","state":"NOT_STARTED"},{"name":"SERVICE","message":"Deleting Cloud Run service","state":"IN_PROGRESS","resource":"projects/nooko-hub/locations/us-central1/services/startconversation"}],"operationType":"DELETE_FUNCTION"},"done":false}
[debug] [2025-12-12T03:57:58.761Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/nooko-hub/locations/us-central1/functions 200
[debug] [2025-12-12T03:57:58.761Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/nooko-hub/locations/us-central1/functions {"name":"operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v1.OperationMetadataV1","target":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage","updateTime":"2025-12-12T03:57:59.475343057Z"}}
[debug] [2025-12-12T03:57:58.761Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:57:58.761Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:57:58.761Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y [none]
[debug] [2025-12-12T03:57:58.986Z] [delete-default-us-central1-sendMessage] Retrying task index 0
[debug] [2025-12-12T03:57:58.986Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:57:58.986Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:57:58.986Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879056-645b94465de00-6be2b16c-40691da5 [none]
[debug] [2025-12-12T03:57:59.048Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y 200
[debug] [2025-12-12T03:57:59.048Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y {"name":"operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v1.OperationMetadataV1","target":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage","updateTime":"2025-12-12T03:57:59.475343057Z"}}
[debug] [2025-12-12T03:57:59.126Z] [delete-default-us-central1-startConversation] Retrying task index 0
[debug] [2025-12-12T03:57:59.126Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:57:59.126Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:57:59.127Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879026-645b9446568f6-9b161675-b7134345 [none]
[debug] [2025-12-12T03:57:59.243Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879056-645b94465de00-6be2b16c-40691da5 200
[debug] [2025-12-12T03:57:59.243Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879056-645b94465de00-6be2b16c-40691da5 {"name":"projects/nooko-hub/locations/us-central1/operations/operation-1765511879056-645b94465de00-6be2b16c-40691da5","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-12-12T03:57:59.074257930Z","target":"projects/nooko-hub/locations/us-central1/functions/sendMessage","verb":"delete","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/nooko-hub/locations/us-central1/functions/sendMessage","environment":"GEN_2"},"stages":[{"name":"ARTIFACT_REGISTRY","state":"NOT_STARTED"},{"name":"SERVICE","message":"Deleting Cloud Run service","state":"IN_PROGRESS","resource":"projects/nooko-hub/locations/us-central1/services/sendmessage"}],"operationType":"DELETE_FUNCTION"},"done":false}
[debug] [2025-12-12T03:57:59.424Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879026-645b9446568f6-9b161675-b7134345 200
[debug] [2025-12-12T03:57:59.424Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879026-645b9446568f6-9b161675-b7134345 {"name":"projects/nooko-hub/locations/us-central1/operations/operation-1765511879026-645b9446568f6-9b161675-b7134345","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-12-12T03:57:59.045855786Z","target":"projects/nooko-hub/locations/us-central1/functions/startConversation","verb":"delete","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/nooko-hub/locations/us-central1/functions/startConversation","environment":"GEN_2"},"stages":[{"name":"ARTIFACT_REGISTRY","state":"NOT_STARTED"},{"name":"SERVICE","message":"Deleting Cloud Run service","state":"IN_PROGRESS","resource":"projects/nooko-hub/locations/us-central1/services/startconversation"}],"operationType":"DELETE_FUNCTION"},"done":false}
[debug] [2025-12-12T03:57:59.553Z] [create-default-us-central1-notifyNewChatMessage] Retrying task index 0
[debug] [2025-12-12T03:57:59.553Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:57:59.553Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:57:59.553Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y [none]
[debug] [2025-12-12T03:57:59.723Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y 200
[debug] [2025-12-12T03:57:59.723Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y {"name":"operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v1.OperationMetadataV1","target":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage","type":"CREATE_FUNCTION","request":{"@type":"type.googleapis.com/google.cloud.functions.v1.CloudFunction","name":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/nooko-hub/databases/(default)/documents/jyc_chat_messages/{docId}","failurePolicy":{}},"entryPoint":"notifyNewChatMessage","updateTime":"1970-01-01T00:00:00Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"a6b53db0f32384aa7772a58b5639488634932525"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-300177851644.us-central1.cloudfunctions.appspot.com/282ff3e5-b88a-467c-af5d-026e258743ff.zip?GoogleAccessId=service-46349385457@gcf-admin-robot.iam.gserviceaccount.com&Expires=1765513557&Signature=S29ZFxbDVU9eEk2PqbLFutWRme9oviZTfvqGTErqe4DqEKO0XvwRnjzGuFz9Zn%2FKEf7JgL3r6Wj3jGdrXKa15doBzgVxtdq6qNZm0iPHmBpgHyuQSXGAVBWiQVKzASVTesy1jIB39Fc8KroGoQ7YJWTF%2FyDpKkhJx4Js%2BWOxpXMVLBM04kfZWuxh448ZQpNbEWp%2B9C0pul5WIi0FSk8GLR3GLBIAVKSHD27A7YkOJer5tLRBKJiGB0Nfg9aVGcg49TyWU%2FbjgI%2FOMJ6vPjefoDvso0ioz8%2B%2FO%2FEeRiLizKNCFyG0AlKC4B9Owj7VAeCsDBA9uECe3JS39Hu1kyg19w%3D%3D","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"nooko-hub\",\"databaseURL\":\"https://nooko-hub-default-rtdb.firebaseio.com\",\"storageBucket\":\"nooko-hub.firebasestorage.app\"}","GCLOUD_PROJECT":"nooko-hub","EVENTARC_CLOUD_EVENT_SOURCE":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage"},"runtime":"nodejs20","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRegistry":"ARTIFACT_REGISTRY"},"versionId":"1","updateTime":"2025-12-12T03:57:59.475343057Z"}}
[debug] [2025-12-12T03:58:00.246Z] [delete-default-us-central1-sendMessage] Retrying task index 0
[debug] [2025-12-12T03:58:00.246Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:00.246Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:00.246Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879056-645b94465de00-6be2b16c-40691da5 [none]
[debug] [2025-12-12T03:58:00.428Z] [delete-default-us-central1-startConversation] Retrying task index 0
[debug] [2025-12-12T03:58:00.428Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:00.428Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:00.429Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879026-645b9446568f6-9b161675-b7134345 [none]
[debug] [2025-12-12T03:58:00.513Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879056-645b94465de00-6be2b16c-40691da5 200
[debug] [2025-12-12T03:58:00.513Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879056-645b94465de00-6be2b16c-40691da5 {"name":"projects/nooko-hub/locations/us-central1/operations/operation-1765511879056-645b94465de00-6be2b16c-40691da5","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-12-12T03:57:59.074257930Z","target":"projects/nooko-hub/locations/us-central1/functions/sendMessage","verb":"delete","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/nooko-hub/locations/us-central1/functions/sendMessage","environment":"GEN_2"},"stages":[{"name":"ARTIFACT_REGISTRY","state":"NOT_STARTED"},{"name":"SERVICE","message":"Deleting Cloud Run service","state":"IN_PROGRESS","resource":"projects/nooko-hub/locations/us-central1/services/sendmessage"}],"operationType":"DELETE_FUNCTION"},"done":false}
[debug] [2025-12-12T03:58:00.681Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879026-645b9446568f6-9b161675-b7134345 200
[debug] [2025-12-12T03:58:00.681Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879026-645b9446568f6-9b161675-b7134345 {"name":"projects/nooko-hub/locations/us-central1/operations/operation-1765511879026-645b9446568f6-9b161675-b7134345","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-12-12T03:57:59.045855786Z","target":"projects/nooko-hub/locations/us-central1/functions/startConversation","verb":"delete","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/nooko-hub/locations/us-central1/functions/startConversation","environment":"GEN_2"},"stages":[{"name":"ARTIFACT_REGISTRY","state":"NOT_STARTED"},{"name":"SERVICE","message":"Deleting Cloud Run service","state":"IN_PROGRESS","resource":"projects/nooko-hub/locations/us-central1/services/startconversation"}],"operationType":"DELETE_FUNCTION"},"done":false}
[debug] [2025-12-12T03:58:00.728Z] [create-default-us-central1-notifyNewChatMessage] Retrying task index 0
[debug] [2025-12-12T03:58:00.729Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:00.729Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:00.729Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y [none]
[debug] [2025-12-12T03:58:00.977Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y 200
[debug] [2025-12-12T03:58:00.977Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y {"name":"operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v1.OperationMetadataV1","target":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage","type":"CREATE_FUNCTION","request":{"@type":"type.googleapis.com/google.cloud.functions.v1.CloudFunction","name":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/nooko-hub/databases/(default)/documents/jyc_chat_messages/{docId}","failurePolicy":{}},"entryPoint":"notifyNewChatMessage","updateTime":"1970-01-01T00:00:00Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"a6b53db0f32384aa7772a58b5639488634932525"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-300177851644.us-central1.cloudfunctions.appspot.com/282ff3e5-b88a-467c-af5d-026e258743ff.zip?GoogleAccessId=service-46349385457@gcf-admin-robot.iam.gserviceaccount.com&Expires=1765513557&Signature=S29ZFxbDVU9eEk2PqbLFutWRme9oviZTfvqGTErqe4DqEKO0XvwRnjzGuFz9Zn%2FKEf7JgL3r6Wj3jGdrXKa15doBzgVxtdq6qNZm0iPHmBpgHyuQSXGAVBWiQVKzASVTesy1jIB39Fc8KroGoQ7YJWTF%2FyDpKkhJx4Js%2BWOxpXMVLBM04kfZWuxh448ZQpNbEWp%2B9C0pul5WIi0FSk8GLR3GLBIAVKSHD27A7YkOJer5tLRBKJiGB0Nfg9aVGcg49TyWU%2FbjgI%2FOMJ6vPjefoDvso0ioz8%2B%2FO%2FEeRiLizKNCFyG0AlKC4B9Owj7VAeCsDBA9uECe3JS39Hu1kyg19w%3D%3D","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"nooko-hub\",\"databaseURL\":\"https://nooko-hub-default-rtdb.firebaseio.com\",\"storageBucket\":\"nooko-hub.firebasestorage.app\"}","GCLOUD_PROJECT":"nooko-hub","EVENTARC_CLOUD_EVENT_SOURCE":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage"},"runtime":"nodejs20","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRegistry":"ARTIFACT_REGISTRY"},"versionId":"1","updateTime":"2025-12-12T03:57:59.475343057Z"}}
[debug] [2025-12-12T03:58:02.517Z] [delete-default-us-central1-sendMessage] Retrying task index 0
[debug] [2025-12-12T03:58:02.517Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:02.517Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:02.517Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879056-645b94465de00-6be2b16c-40691da5 [none]
[debug] [2025-12-12T03:58:02.688Z] [delete-default-us-central1-startConversation] Retrying task index 0
[debug] [2025-12-12T03:58:02.688Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:02.688Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:02.688Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879026-645b9446568f6-9b161675-b7134345 [none]
[debug] [2025-12-12T03:58:02.779Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879056-645b94465de00-6be2b16c-40691da5 200
[debug] [2025-12-12T03:58:02.779Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879056-645b94465de00-6be2b16c-40691da5 {"name":"projects/nooko-hub/locations/us-central1/operations/operation-1765511879056-645b94465de00-6be2b16c-40691da5","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-12-12T03:57:59.074257930Z","endTime":"2025-12-12T03:58:02.343671714Z","target":"projects/nooko-hub/locations/us-central1/functions/sendMessage","verb":"delete","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/nooko-hub/locations/us-central1/functions/sendMessage","environment":"GEN_2"},"stages":[{"name":"ARTIFACT_REGISTRY","message":"Deleting function artifacts in Artifact Registry","state":"COMPLETE"},{"name":"SERVICE","message":"Deleting Cloud Run service","state":"COMPLETE","resource":"projects/nooko-hub/locations/us-central1/services/sendmessage"}],"operationType":"DELETE_FUNCTION"},"done":true,"response":{"@type":"type.googleapis.com/google.protobuf.Empty"}}
[info] +  functions[sendMessage(us-central1)] Successful delete operation. 
[debug] [2025-12-12T03:58:02.937Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879026-645b9446568f6-9b161675-b7134345 200
[debug] [2025-12-12T03:58:02.937Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/nooko-hub/locations/us-central1/operations/operation-1765511879026-645b9446568f6-9b161675-b7134345 {"name":"projects/nooko-hub/locations/us-central1/operations/operation-1765511879026-645b9446568f6-9b161675-b7134345","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-12-12T03:57:59.045855786Z","endTime":"2025-12-12T03:58:02.107028414Z","target":"projects/nooko-hub/locations/us-central1/functions/startConversation","verb":"delete","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/nooko-hub/locations/us-central1/functions/startConversation","environment":"GEN_2"},"stages":[{"name":"ARTIFACT_REGISTRY","message":"Deleting function artifacts in Artifact Registry","state":"COMPLETE"},{"name":"SERVICE","message":"Deleting Cloud Run service","state":"COMPLETE","resource":"projects/nooko-hub/locations/us-central1/services/startconversation"}],"operationType":"DELETE_FUNCTION"},"done":true,"response":{"@type":"type.googleapis.com/google.protobuf.Empty"}}
[info] +  functions[startConversation(us-central1)] Successful delete operation. 
[debug] [2025-12-12T03:58:02.979Z] [create-default-us-central1-notifyNewChatMessage] Retrying task index 0
[debug] [2025-12-12T03:58:02.979Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:02.979Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:02.979Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y [none]
[debug] [2025-12-12T03:58:03.107Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y 200
[debug] [2025-12-12T03:58:03.107Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y {"name":"operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v1.OperationMetadataV1","target":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage","type":"CREATE_FUNCTION","request":{"@type":"type.googleapis.com/google.cloud.functions.v1.CloudFunction","name":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/nooko-hub/databases/(default)/documents/jyc_chat_messages/{docId}","failurePolicy":{}},"entryPoint":"notifyNewChatMessage","updateTime":"1970-01-01T00:00:00Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"a6b53db0f32384aa7772a58b5639488634932525"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-300177851644.us-central1.cloudfunctions.appspot.com/282ff3e5-b88a-467c-af5d-026e258743ff.zip?GoogleAccessId=service-46349385457@gcf-admin-robot.iam.gserviceaccount.com&Expires=1765513557&Signature=S29ZFxbDVU9eEk2PqbLFutWRme9oviZTfvqGTErqe4DqEKO0XvwRnjzGuFz9Zn%2FKEf7JgL3r6Wj3jGdrXKa15doBzgVxtdq6qNZm0iPHmBpgHyuQSXGAVBWiQVKzASVTesy1jIB39Fc8KroGoQ7YJWTF%2FyDpKkhJx4Js%2BWOxpXMVLBM04kfZWuxh448ZQpNbEWp%2B9C0pul5WIi0FSk8GLR3GLBIAVKSHD27A7YkOJer5tLRBKJiGB0Nfg9aVGcg49TyWU%2FbjgI%2FOMJ6vPjefoDvso0ioz8%2B%2FO%2FEeRiLizKNCFyG0AlKC4B9Owj7VAeCsDBA9uECe3JS39Hu1kyg19w%3D%3D","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"nooko-hub\",\"databaseURL\":\"https://nooko-hub-default-rtdb.firebaseio.com\",\"storageBucket\":\"nooko-hub.firebasestorage.app\"}","GCLOUD_PROJECT":"nooko-hub","EVENTARC_CLOUD_EVENT_SOURCE":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage"},"runtime":"nodejs20","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRegistry":"ARTIFACT_REGISTRY"},"versionId":"1","updateTime":"2025-12-12T03:57:59.475343057Z","buildId":"60d5d1d5-6674-4436-a394-1391f472381e","buildName":"projects/46349385457/locations/us-central1/builds/60d5d1d5-6674-4436-a394-1391f472381e"}}
[debug] [2025-12-12T03:58:07.110Z] [create-default-us-central1-notifyNewChatMessage] Retrying task index 0
[debug] [2025-12-12T03:58:07.111Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:07.111Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:07.111Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y [none]
[debug] [2025-12-12T03:58:07.362Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y 200
[debug] [2025-12-12T03:58:07.362Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y {"name":"operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v1.OperationMetadataV1","target":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage","type":"CREATE_FUNCTION","request":{"@type":"type.googleapis.com/google.cloud.functions.v1.CloudFunction","name":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/nooko-hub/databases/(default)/documents/jyc_chat_messages/{docId}","failurePolicy":{}},"entryPoint":"notifyNewChatMessage","updateTime":"1970-01-01T00:00:00Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"a6b53db0f32384aa7772a58b5639488634932525"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-300177851644.us-central1.cloudfunctions.appspot.com/282ff3e5-b88a-467c-af5d-026e258743ff.zip?GoogleAccessId=service-46349385457@gcf-admin-robot.iam.gserviceaccount.com&Expires=1765513557&Signature=S29ZFxbDVU9eEk2PqbLFutWRme9oviZTfvqGTErqe4DqEKO0XvwRnjzGuFz9Zn%2FKEf7JgL3r6Wj3jGdrXKa15doBzgVxtdq6qNZm0iPHmBpgHyuQSXGAVBWiQVKzASVTesy1jIB39Fc8KroGoQ7YJWTF%2FyDpKkhJx4Js%2BWOxpXMVLBM04kfZWuxh448ZQpNbEWp%2B9C0pul5WIi0FSk8GLR3GLBIAVKSHD27A7YkOJer5tLRBKJiGB0Nfg9aVGcg49TyWU%2FbjgI%2FOMJ6vPjefoDvso0ioz8%2B%2FO%2FEeRiLizKNCFyG0AlKC4B9Owj7VAeCsDBA9uECe3JS39Hu1kyg19w%3D%3D","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"nooko-hub\",\"databaseURL\":\"https://nooko-hub-default-rtdb.firebaseio.com\",\"storageBucket\":\"nooko-hub.firebasestorage.app\"}","GCLOUD_PROJECT":"nooko-hub","EVENTARC_CLOUD_EVENT_SOURCE":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage"},"runtime":"nodejs20","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRegistry":"ARTIFACT_REGISTRY"},"versionId":"1","updateTime":"2025-12-12T03:57:59.475343057Z","buildId":"60d5d1d5-6674-4436-a394-1391f472381e","buildName":"projects/46349385457/locations/us-central1/builds/60d5d1d5-6674-4436-a394-1391f472381e"}}
[debug] [2025-12-12T03:58:15.362Z] [create-default-us-central1-notifyNewChatMessage] Retrying task index 0
[debug] [2025-12-12T03:58:15.362Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:15.362Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:15.363Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y [none]
[debug] [2025-12-12T03:58:15.583Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y 200
[debug] [2025-12-12T03:58:15.583Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y {"name":"operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v1.OperationMetadataV1","target":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage","type":"CREATE_FUNCTION","request":{"@type":"type.googleapis.com/google.cloud.functions.v1.CloudFunction","name":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/nooko-hub/databases/(default)/documents/jyc_chat_messages/{docId}","failurePolicy":{}},"entryPoint":"notifyNewChatMessage","updateTime":"1970-01-01T00:00:00Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"a6b53db0f32384aa7772a58b5639488634932525"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-300177851644.us-central1.cloudfunctions.appspot.com/282ff3e5-b88a-467c-af5d-026e258743ff.zip?GoogleAccessId=service-46349385457@gcf-admin-robot.iam.gserviceaccount.com&Expires=1765513557&Signature=S29ZFxbDVU9eEk2PqbLFutWRme9oviZTfvqGTErqe4DqEKO0XvwRnjzGuFz9Zn%2FKEf7JgL3r6Wj3jGdrXKa15doBzgVxtdq6qNZm0iPHmBpgHyuQSXGAVBWiQVKzASVTesy1jIB39Fc8KroGoQ7YJWTF%2FyDpKkhJx4Js%2BWOxpXMVLBM04kfZWuxh448ZQpNbEWp%2B9C0pul5WIi0FSk8GLR3GLBIAVKSHD27A7YkOJer5tLRBKJiGB0Nfg9aVGcg49TyWU%2FbjgI%2FOMJ6vPjefoDvso0ioz8%2B%2FO%2FEeRiLizKNCFyG0AlKC4B9Owj7VAeCsDBA9uECe3JS39Hu1kyg19w%3D%3D","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"nooko-hub\",\"databaseURL\":\"https://nooko-hub-default-rtdb.firebaseio.com\",\"storageBucket\":\"nooko-hub.firebasestorage.app\"}","GCLOUD_PROJECT":"nooko-hub","EVENTARC_CLOUD_EVENT_SOURCE":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage"},"runtime":"nodejs20","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRegistry":"ARTIFACT_REGISTRY"},"versionId":"1","updateTime":"2025-12-12T03:57:59.475343057Z","buildId":"60d5d1d5-6674-4436-a394-1391f472381e","buildName":"projects/46349385457/locations/us-central1/builds/60d5d1d5-6674-4436-a394-1391f472381e"}}
[debug] [2025-12-12T03:58:25.589Z] [create-default-us-central1-notifyNewChatMessage] Retrying task index 0
[debug] [2025-12-12T03:58:25.589Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:25.589Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:25.589Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y [none]
[debug] [2025-12-12T03:58:25.886Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y 200
[debug] [2025-12-12T03:58:25.886Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y {"name":"operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v1.OperationMetadataV1","target":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage","type":"CREATE_FUNCTION","request":{"@type":"type.googleapis.com/google.cloud.functions.v1.CloudFunction","name":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/nooko-hub/databases/(default)/documents/jyc_chat_messages/{docId}","failurePolicy":{}},"entryPoint":"notifyNewChatMessage","updateTime":"1970-01-01T00:00:00Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"a6b53db0f32384aa7772a58b5639488634932525"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-300177851644.us-central1.cloudfunctions.appspot.com/282ff3e5-b88a-467c-af5d-026e258743ff.zip?GoogleAccessId=service-46349385457@gcf-admin-robot.iam.gserviceaccount.com&Expires=1765513557&Signature=S29ZFxbDVU9eEk2PqbLFutWRme9oviZTfvqGTErqe4DqEKO0XvwRnjzGuFz9Zn%2FKEf7JgL3r6Wj3jGdrXKa15doBzgVxtdq6qNZm0iPHmBpgHyuQSXGAVBWiQVKzASVTesy1jIB39Fc8KroGoQ7YJWTF%2FyDpKkhJx4Js%2BWOxpXMVLBM04kfZWuxh448ZQpNbEWp%2B9C0pul5WIi0FSk8GLR3GLBIAVKSHD27A7YkOJer5tLRBKJiGB0Nfg9aVGcg49TyWU%2FbjgI%2FOMJ6vPjefoDvso0ioz8%2B%2FO%2FEeRiLizKNCFyG0AlKC4B9Owj7VAeCsDBA9uECe3JS39Hu1kyg19w%3D%3D","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"nooko-hub\",\"databaseURL\":\"https://nooko-hub-default-rtdb.firebaseio.com\",\"storageBucket\":\"nooko-hub.firebasestorage.app\"}","GCLOUD_PROJECT":"nooko-hub","EVENTARC_CLOUD_EVENT_SOURCE":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage"},"runtime":"nodejs20","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRegistry":"ARTIFACT_REGISTRY"},"versionId":"1","updateTime":"2025-12-12T03:57:59.475343057Z","buildId":"60d5d1d5-6674-4436-a394-1391f472381e","buildName":"projects/46349385457/locations/us-central1/builds/60d5d1d5-6674-4436-a394-1391f472381e"}}
[debug] [2025-12-12T03:58:35.893Z] [create-default-us-central1-notifyNewChatMessage] Retrying task index 0
[debug] [2025-12-12T03:58:35.893Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:35.893Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:35.893Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y [none]
[debug] [2025-12-12T03:58:36.210Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y 200
[debug] [2025-12-12T03:58:36.210Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y {"name":"operations/cHJvamVjdHMvbm9va28taHViL2xvY2F0aW9ucy91cy1jZW50cmFsMS9vcGVyYXRpb25zL29wZXJhdGlvbi0xNzY1NTExODc5MDQzLTY0NWI5NDQ2NWE4MjktNDYwZDA1MGUtODVjZmRhY2Y","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v1.OperationMetadataV1","target":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage","type":"CREATE_FUNCTION","request":{"@type":"type.googleapis.com/google.cloud.functions.v1.CloudFunction","name":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/nooko-hub/databases/(default)/documents/jyc_chat_messages/{docId}","failurePolicy":{}},"entryPoint":"notifyNewChatMessage","updateTime":"1970-01-01T00:00:00Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"a6b53db0f32384aa7772a58b5639488634932525"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-300177851644.us-central1.cloudfunctions.appspot.com/282ff3e5-b88a-467c-af5d-026e258743ff.zip?GoogleAccessId=service-46349385457@gcf-admin-robot.iam.gserviceaccount.com&Expires=1765513557&Signature=S29ZFxbDVU9eEk2PqbLFutWRme9oviZTfvqGTErqe4DqEKO0XvwRnjzGuFz9Zn%2FKEf7JgL3r6Wj3jGdrXKa15doBzgVxtdq6qNZm0iPHmBpgHyuQSXGAVBWiQVKzASVTesy1jIB39Fc8KroGoQ7YJWTF%2FyDpKkhJx4Js%2BWOxpXMVLBM04kfZWuxh448ZQpNbEWp%2B9C0pul5WIi0FSk8GLR3GLBIAVKSHD27A7YkOJer5tLRBKJiGB0Nfg9aVGcg49TyWU%2FbjgI%2FOMJ6vPjefoDvso0ioz8%2B%2FO%2FEeRiLizKNCFyG0AlKC4B9Owj7VAeCsDBA9uECe3JS39Hu1kyg19w%3D%3D","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"nooko-hub\",\"databaseURL\":\"https://nooko-hub-default-rtdb.firebaseio.com\",\"storageBucket\":\"nooko-hub.firebasestorage.app\"}","GCLOUD_PROJECT":"nooko-hub","EVENTARC_CLOUD_EVENT_SOURCE":"projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage"},"runtime":"nodejs20","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRegistry":"ARTIFACT_REGISTRY"},"versionId":"1","updateTime":"2025-12-12T03:58:27.569193681Z","buildId":"60d5d1d5-6674-4436-a394-1391f472381e","buildName":"projects/46349385457/locations/us-central1/builds/60d5d1d5-6674-4436-a394-1391f472381e"},"done":true,"error":{"code":3,"message":"Gen1 operation for function projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage failed: Build failed: Access to bucket gcf-sources-46349385457-us-central1 denied. You must grant Storage Object Viewer permission to 46349385457-compute@developer.gserviceaccount.com. If you are using VPC Service Controls, you must also grant it access to your service perimeter.\n."}}
[debug] [2025-12-12T03:58:36.211Z] Got source token undefined for region us-central1
[error] Gen1 operation for function projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage failed: Build failed: Access to bucket gcf-sources-46349385457-us-central1 denied. You must grant Storage Object Viewer permission to 46349385457-compute@developer.gserviceaccount.com. If you are using VPC Service Controls, you must also grant it access to your service perimeter.
.
[debug] [2025-12-12T03:58:36.217Z] Total Function Deployment time: 38255
[debug] [2025-12-12T03:58:36.217Z] 3 Functions Deployed
[debug] [2025-12-12T03:58:36.217Z] 1 Functions Errored
[debug] [2025-12-12T03:58:36.217Z] 0 Function Deployments Aborted
[debug] [2025-12-12T03:58:36.217Z] Average Function Deployment time: 16018.333333333334
[info] 
[info] Functions deploy had errors with the following functions:
	notifyNewChatMessage(us-central1)
[debug] [2025-12-12T03:58:36.298Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:36.299Z] Checked if tokens are valid: true, expires at: 1765515203286
[debug] [2025-12-12T03:58:36.299Z] >>> [apiv2][query] GET https://artifactregistry.googleapis.com/v1/projects/nooko-hub/locations/us-central1/repositories/gcf-artifacts [none]
[debug] [2025-12-12T03:58:36.493Z] <<< [apiv2][status] GET https://artifactregistry.googleapis.com/v1/projects/nooko-hub/locations/us-central1/repositories/gcf-artifacts 200
[debug] [2025-12-12T03:58:36.493Z] <<< [apiv2][body] GET https://artifactregistry.googleapis.com/v1/projects/nooko-hub/locations/us-central1/repositories/gcf-artifacts {"name":"projects/nooko-hub/locations/us-central1/repositories/gcf-artifacts","format":"DOCKER","description":"This repository is created and used by Cloud Functions for storing function docker images.","labels":{"goog-managed-by":"cloudfunctions"},"createTime":"2025-08-01T01:58:19.546646Z","updateTime":"2025-12-12T03:58:02.233276Z","mode":"STANDARD_REPOSITORY","cleanupPolicies":{"firebase-functions-cleanup":{"id":"firebase-functions-cleanup","action":"DELETE","condition":{"tagState":"ANY","olderThan":"86400s"}}},"vulnerabilityScanningConfig":{"lastEnableTime":"2025-08-01T01:57:59.386656083Z","enablementState":"SCANNING_DISABLED","enablementStateReason":"API containerscanning.googleapis.com is not enabled."},"satisfiesPzi":true,"registryUri":"us-central1-docker.pkg.dev/nooko-hub/gcf-artifacts"}
[debug] [2025-12-12T03:58:36.493Z] Functions deploy failed.
[debug] [2025-12-12T03:58:36.493Z] {
  "endpoint": {
    "id": "notifyNewChatMessage",
    "project": "nooko-hub",
    "region": "us-central1",
    "entryPoint": "notifyNewChatMessage",
    "platform": "gcfv1",
    "runtime": "nodejs20",
    "eventTrigger": {
      "eventType": "providers/cloud.firestore/eventTypes/document.create",
      "retry": false,
      "eventFilters": {
        "resource": "projects/nooko-hub/databases/(default)/documents/jyc_chat_messages/{docId}"
      }
    },
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "serviceAccount": null,
    "ingressSettings": null,
    "availableMemoryMb": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"nooko-hub\",\"databaseURL\":\"https://nooko-hub-default-rtdb.firebaseio.com\",\"storageBucket\":\"nooko-hub.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "nooko-hub",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage"
    },
    "codebase": "default",
    "targetedByOnly": false,
    "hash": "a6b53db0f32384aa7772a58b5639488634932525"
  },
  "op": "create",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "exit": 1,
    "message": "Gen1 operation for function projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage failed: Build failed: Access to bucket gcf-sources-46349385457-us-central1 denied. You must grant Storage Object Viewer permission to 46349385457-compute@developer.gserviceaccount.com. If you are using VPC Service Controls, you must also grant it access to your service perimeter.\n.",
    "original": {
      "code": 3,
      "message": "Gen1 operation for function projects/nooko-hub/locations/us-central1/functions/notifyNewChatMessage failed: Build failed: Access to bucket gcf-sources-46349385457-us-central1 denied. You must grant Storage Object Viewer permission to 46349385457-compute@developer.gserviceaccount.com. If you are using VPC Service Controls, you must also grant it access to your service perimeter.\n."
    },
    "status": 3,
    "code": 3
  }
}
[debug] [2025-12-12T03:58:36.522Z] Error: Failed to create function notifyNewChatMessage in region us-central1
    at C:\Users\jerry\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:52:11
    at process.processTicksAndRejections (node:internal/process/task_queues:103:5)
    at async Fabricator.createV1Function (C:\Users\jerry\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:194:32)
    at async Fabricator.createEndpoint (C:\Users\jerry\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:134:13)
    at async handle (C:\Users\jerry\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:89:17)
[error] 
[error] Error: There was an error deploying functions
